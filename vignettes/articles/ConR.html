<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Conservation assessments based on multiple-IUCN criteria using ConR</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Conservation assessments based on
multiple-IUCN criteria using ConR</h1>


<div id="TOC">
<ul>
<li><a href="#definitions" id="toc-definitions"><span class="toc-section-number">1</span> Definitions</a></li>
<li><a href="#species-information" id="toc-species-information"><span class="toc-section-number">2</span> Species information</a>
<ul>
<li><a href="#occurrence-records" id="toc-occurrence-records"><span class="toc-section-number">2.1</span> Occurrence records</a></li>
<li><a href="#species-biology-and-uses" id="toc-species-biology-and-uses"><span class="toc-section-number">2.2</span> Species biology and uses</a></li>
<li><a href="#population-sizes" id="toc-population-sizes"><span class="toc-section-number">2.3</span> Population sizes</a></li>
</ul></li>
<li><a href="#population-metrics" id="toc-population-metrics"><span class="toc-section-number">3</span> Population metrics</a>
<ul>
<li><a href="#population-size-decline" id="toc-population-size-decline"><span class="toc-section-number">3.1</span> Population size decline</a></li>
<li><a href="#number-of-spatially-valid-and-unique-occurrences" id="toc-number-of-spatially-valid-and-unique-occurrences"><span class="toc-section-number">3.2</span> Number of spatially valid and
unique occurrences</a></li>
<li><a href="#extent-of-occurrence-eoo" id="toc-extent-of-occurrence-eoo"><span class="toc-section-number">3.3</span> Extent of Occurrence
(EOO)</a></li>
<li><a href="#area-of-occupancy-aoo" id="toc-area-of-occupancy-aoo"><span class="toc-section-number">3.4</span> Area of occupancy (AOO)</a></li>
<li><a href="#number-of-subpopulations" id="toc-number-of-subpopulations"><span class="toc-section-number">3.5</span> Number of subpopulations</a></li>
<li><a href="#number-of-locations" id="toc-number-of-locations"><span class="toc-section-number">3.6</span> Number of locations</a></li>
<li><a href="#severe-fragmentation" id="toc-severe-fragmentation"><span class="toc-section-number">3.7</span> Severe fragmentation</a></li>
<li><a href="#area-of-habitat-aoh" id="toc-area-of-habitat-aoh"><span class="toc-section-number">3.8</span> Area of habitat (AOH)</a></li>
</ul></li>
<li><a href="#iucn-criteria-assessments" id="toc-iucn-criteria-assessments"><span class="toc-section-number">4</span> IUCN criteria assessments</a>
<ul>
<li><a href="#population-size-reduction-iucn-criterion-a" id="toc-population-size-reduction-iucn-criterion-a"><span class="toc-section-number">4.1</span> Population size reduction (IUCN
criterion A)</a></li>
<li><a href="#species-geographic-range-iucn-criterion-b" id="toc-species-geographic-range-iucn-criterion-b"><span class="toc-section-number">4.2</span> Species geographic range (IUCN
criterion B)</a></li>
<li><a href="#small-and-declining-populations-iucn-criterion-c" id="toc-small-and-declining-populations-iucn-criterion-c"><span class="toc-section-number">4.3</span> Small and declining populations
(IUCN criterion C)</a></li>
<li><a href="#very-small-population-sizes-iucn-criterion-d" id="toc-very-small-population-sizes-iucn-criterion-d"><span class="toc-section-number">4.4</span> Very small population sizes (IUCN
criterion D)</a></li>
<li><a href="#combining-the-results-from-all-criteria" id="toc-combining-the-results-from-all-criteria"><span class="toc-section-number">4.5</span> Combining the results from all
criteria</a></li>
<li><a href="#near-threatened" id="toc-near-threatened"><span class="toc-section-number">4.6</span> Near threatened</a></li>
<li><a href="#consensus-assessment" id="toc-consensus-assessment"><span class="toc-section-number">4.7</span> Consensus assessment</a></li>
</ul></li>
</ul>
</div>

<p><br /><br /></p>
<p>This vignette shows how to use <code>ConR</code> to apply a workflow
for conducting conservation assessments for multiple species using the
IUCN criteria A, B, C and D. Here, we use only three species to make it
simple. But <code>ConR</code> was developed to perform assessments for
many more species at the same time.</p>
<p><br /><br /></p>
<div id="definitions" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Definitions</h1>
<p>We will use as examples three emblematic and threatened arborescent
species that are endemic or near-endemic to the Atlantic Forest in South
America: <em>Araucaria angustifolia</em>, <em>Euterpe edulis</em> and
<em>Paubrasilia echinata</em>. Thus, it is necessary to obtain
information for this specific region of the world (e.g. habitat cover
maps, protected areas), which should be available to run this
tutorial.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>spp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Araucaria angustifolia&quot;</span>, <span class="st">&quot;Euterpe edulis&quot;</span>, <span class="st">&quot;Paubrasilia echinata&quot;</span>)</span></code></pre></div>
<p>Another more general but important piece of information is the year
of the assessment itself (which depends on the information available)
and the starting year used to assess recent continuing decline (which
depends on the region):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>assess.year <span class="ot">&lt;-</span> <span class="dv">2018</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>recent.year <span class="ot">&lt;-</span> <span class="dv">2000</span></span></code></pre></div>
<p><br /><br /></p>
</div>
<div id="species-information" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Species
information</h1>
<p>To perform the IUCN conservation assessments, we need different types
of species information related to their biology, distribution,
population size, threats, among other information.</p>
<div id="occurrence-records" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Occurrence
records</h2>
<p>We will use real occurrence data for our target species. This example
dataset data is provided with <code>ConR</code> within the internal
object <code>example_tutorial</code>, but users can load a file
containing a similar format. We will name it <code>occs</code> for
simplicity.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">data</span>(example_tutorial)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>occs <span class="ot">&lt;-</span> example_tutorial<span class="sc">$</span>occurrences</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">head</span>(occs, <span class="dv">2</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt;       ddlat     ddlon                    tax coly   UC   source tax.check</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; 1 -23.40102 -51.96764 Araucaria angustifolia 2004 &lt;NA&gt; herbaria      high</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; 2 -22.86267 -48.46837 Araucaria angustifolia 1998 &lt;NA&gt; herbaria      high</span></span></code></pre></div>
</div>
<div id="species-biology-and-uses" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Species biology and
uses</h2>
<p>Then, we need to define objects with the basic species information
that are necessary for the IUCN assessments.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>gen.length <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">65</span>, <span class="dv">50</span>) <span class="do">## generation length in years</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>p.mature <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.4485</span>, <span class="fl">0.3028</span>, <span class="fl">0.4143</span>) <span class="do">## proportion of mature individuals in the population</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>early.sucession <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="dv">1</span>, <span class="dv">1</span>) <span class="do">## correction applied to population decline</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>harvest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>) <span class="do">##  levels of exploitation causing reductions in population size (in %)</span></span></code></pre></div>
</div>
<div id="population-sizes" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Population sizes</h2>
<p>To assess the IUCN criteria A, C and D, we also need to provide
<code>ConR</code> the population size information. For this tutorial,
this information is also provided within the internal object
<code>example_tutorial</code>. We will name it
<code>pop.sizes</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>pop.sizes <span class="ot">&lt;-</span> example_tutorial<span class="sc">$</span>population.sizes</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">names</span>(pop.sizes[,<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>pop.sizes[, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt;                  species       1850       1940       1945       1950       1955</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; 1 Araucaria angustifolia 2263714973 1763953733 1742714122 1706724090 1672711025</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt; 2         Euterpe edulis 4131301664 3423126071 3375255741 3301309873 3173853514</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt; 3   Paubrasilia echinata   24777189   20519325   20094366   19379164   18179102</span></span></code></pre></div>
<p><br /><br /></p>
</div>
</div>
<div id="population-metrics" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Population metrics</h1>
<p>Before we start calculating the population metrics, we need to load
<code>ConR</code> to make the functions available in our R
workspace.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(ConR)</span></code></pre></div>
<div id="population-size-decline" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Population size
decline</h2>
<p>To match the time frame of 1-3 generation times into the past or into
the future, we need to estimate the population sizes for the years that
we do not have information available. These estimates are produced using
the fit of different statistical models (i.e. quadratic, exponential,
logistic, general logistic) to the population size trends. Here, we will
only estimate population sizes into the past, but one can also use the
same <code>ConR</code> function <code>pop.decline()</code> to estimate
them into the future.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Vector of years missing from the input data</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>possible.years <span class="ot">&lt;-</span> </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="fu">unique</span>(gen.length <span class="sc">*</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), <span class="at">each=</span><span class="fu">length</span>(gen.length))), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>missing.years <span class="ot">&lt;-</span> assess.year <span class="sc">-</span> possible.years</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co"># Estimating population sizes for the missing years</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>est.pop.sizes <span class="ot">&lt;-</span> <span class="fu">pop.decline</span>(pop.sizes[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">taxa =</span> spp, <span class="at">output =</span> <span class="st">&quot;predictions&quot;</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>                             <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co"># Re-organizing the information for downstream analyses</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>new.years <span class="ot">&lt;-</span> est.pop.sizes[[<span class="dv">1</span>]][[<span class="dv">1</span>]]<span class="sc">$</span>years</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>ncols <span class="ot">&lt;-</span> <span class="fu">length</span>(new.years)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>nrows <span class="ot">&lt;-</span> <span class="fu">length</span>(spp)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>mean.pop <span class="ot">&lt;-</span> </span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">ncol =</span> ncols, <span class="at">nrow =</span> nrows, <span class="at">dimnames =</span> <span class="fu">list</span>(spp, new.years))</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(spp)) mean.pop[i,] <span class="ot">&lt;-</span> est.pop.sizes[[<span class="dv">1</span>]][[i]]<span class="sc">$</span>predicted</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>mean.pop <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(<span class="at">tax =</span> spp, mean.pop, <span class="at">row.names =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>We now have a new object called <code>mean.pop</code> which stores
both the input population sizes and the estimates based on the
statistical models that best describe the input data.</p>
</div>
<div id="number-of-spatially-valid-and-unique-occurrences" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Number of spatially
valid and unique occurrences</h2>
<p>We can begin by expecting how many valid occurrences are available
for each species.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>nb.occs <span class="ot">&lt;-</span> <span class="fu">coord.check</span>(<span class="at">XY =</span> occs)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>nb.occs <span class="ot">&lt;-</span> nb.occs<span class="sc">$</span>unique_occs</span></code></pre></div>
</div>
<div id="extent-of-occurrence-eoo" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Extent of Occurrence
(EOO)</h2>
<p>We then use the species occurrences to compute their extent of
occurrences (EOO) in square kilometers using the function
<code>EOO.computing()</code> and the IUCN-recommended Convex Hull
method.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>EOO.hull <span class="ot">&lt;-</span> <span class="fu">EOO.computing</span>(<span class="at">XY =</span> occs[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)], <span class="at">method.range =</span> <span class="st">&quot;convex.hull&quot;</span>, </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>                          <span class="at">export_shp =</span> <span class="cn">TRUE</span>, <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="area-of-occupancy-aoo" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Area of occupancy
(AOO)</h2>
<p>Another important metric for IUCN assessments is the species’ area of
occupancy (AOO), also in square kilometers, which is computed using the
function <code>AOO.computing()</code>. Here, we also set as defaults the
IUCN recommendation of using 2x2 km grid cells to compute AOO.
<code>ConR</code> allows for computing AOO using multiple random
starting positions of the grid, to make sure the AOO estimate is not
influenced by the grid start position.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>AOO <span class="ot">&lt;-</span> <span class="fu">AOO.computing</span>(occs[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)], </span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>                     <span class="at">cell_size_AOO =</span> <span class="dv">2</span>, <span class="at">nbe.rep.rast.AOO =</span> <span class="dv">30</span>,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>                     <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="number-of-subpopulations" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Number of
subpopulations</h2>
<p>The number of subpopulations for each species is also an important
information. The delimitation of subpopulations depends on species
dispersal abilities. If this information is available, it can be
directly provided to the function <code>subpop.comp()</code>. If it is
not available, <code>ConR</code> offers the possibility of estimating
the maximum distance between species occurrences using the function
<code>subpop.radius()</code> and the circular buffer method. This
distance can be used as a proxy of species’ dispersal abilities:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>radius <span class="ot">&lt;-</span> <span class="fu">subpop.radius</span>(<span class="at">XY =</span> occs[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)], </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>                       <span class="at">quant.max =</span> <span class="fl">0.9</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>sub <span class="ot">&lt;-</span> <span class="fu">subpop.comp</span>(<span class="at">XY =</span> occs[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)],</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>                   <span class="at">resol_sub_pop =</span> radius[,<span class="fu">c</span>(<span class="st">&quot;tax&quot;</span>, <span class="st">&quot;radius&quot;</span>)],</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>                   <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="number-of-locations" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Number of
locations</h2>
<p>One of the conditions to detect threat under the IUCN criterion B
(restricted geographic range) is related to the number of locations
where the species occur. Locations depend on the spatial extent of the
threats faced by the species. Here we used an extent of 10 km that makes
sense for the target region, the Atlantic Forest. This computation is
performed using the function <code>locations.comp()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>locs <span class="ot">&lt;-</span> <span class="fu">locations.comp</span>(occs[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),],  </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>                       <span class="at">method =</span> <span class="st">&quot;fixed_grid&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>                       <span class="at">nbe_rep =</span> <span class="dv">30</span>,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>                       <span class="at">cell_size_locations =</span> <span class="dv">10</span>, </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>                       <span class="at">rel_cell_size =</span> <span class="fl">0.05</span>, </span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>                       <span class="co">#threat_list = strict.ucs.spdf, </span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>                       <span class="co">#id_shape = &quot;NAME&quot;,</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>                       <span class="at">method_polygons =</span> <span class="st">&quot;no_more_than_one&quot;</span>, </span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>                       <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<!-- CHECK HERE: I managed to include the shape file but i am getting an error in line 618: do.call("rbind", shapes_loc)  ?? -->
</div>
<div id="severe-fragmentation" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Severe
fragmentation</h2>
<p>Another condition to detect threat under the IUCN criterion B is
whether the species populations is severely fragmented: <em>more than
half of species AOO corresponds to habitat patches separated from others
by a large distance</em>. Thus, to assess the level of fragmentation we
need the information on the species AOO and the dispersal ability. The
function <code>severe_frag()</code> computes the percentage of AOO that
is isolated across a large distance.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>sever.frag <span class="ot">&lt;-</span> <span class="fu">severe_frag</span>(<span class="at">XY =</span> occs, </span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>                          <span class="at">resol_sub_pop =</span> radius[,<span class="fu">c</span>(<span class="st">&quot;tax&quot;</span>, <span class="st">&quot;radius&quot;</span>)], </span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>                          <span class="at">dist_isolated =</span> radius<span class="sc">$</span>radius,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>                          <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="area-of-habitat-aoh" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Area of habitat
(AOH)</h2>
<!-- change the vignette text and code here after function AOH.estimation() is
ready and returning a data frame with the columns below:
AOH <- data.frame(tax = spp,
                  prop.EOO = c(18.80422, 18.74939, 16.89696), 
                  area.EOO = c(309588.7, 389226.0, 274717.6),
                  loss = c(1.587834, 1.529609, 1.535355), 
                  recover = c(1.616235, 1.494770, 1.317942), 
                  rel.loss = c(8.456802, 8.143053, 8.971141),
                  rate.loss  = c(0.5637868, 0.5428702, 0.5980761), 
                  rate.recover  = c(0.5730043, 0.5314911, 0.5199917)) -->
<!-- PREVIOUS COMMENTS/NOTES  -->
<!-- CHECK HERE: error. In the first version of this function 'years' was the
time interval between rasters (as described in the details of the function
documentation). Now I got this error: "the number of years provided is different
to the number of layers/polygon provided".
In addition, the function must return the relative change in AOH if multiple
raster are provide, so we can access decline for criterion B.
The previous columns returned by the function (which were used to assess
continuing decline) are in the data frame above -->
<p>The area of habitat (AOH) is currently not an official population
metric that is compared against the IUCN Criteria. However, it provides
important information on the amount of habitat left for a given species
within its EOO and more importantly how this amount is changing through
time.</p>
<p><code>ConR</code> computes AOH using the function
<code>AOH.estimation()</code>. If habitat maps are available for
different periods in time, the function can be used to infer the
continuing declines of the species AOH, which is an important condition
to assess the IUCN criterion B.</p>
<p>For this example, we do not provide habitat maps for the area of
study (i.e. rasters with the Atlantic Forest cover through time), which
are demanding in terms of storage and computational time. So we will
assume that we already have available a vector containing the relative
losses (in %) of AOH previously estimated for each species between 2000
and 2018.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>rel.loss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">8.5</span>, <span class="fl">8.1</span>, <span class="fl">9.0</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>declineB <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(rel.loss <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="st">&quot;Decreasing&quot;</span>, <span class="st">&quot;Not Decreasing&quot;</span>)</span></code></pre></div>
<p><br /><br /></p>
</div>
</div>
<div id="iucn-criteria-assessments" class="section level1" number="4">
<h1><span class="header-section-number">4</span> IUCN criteria
assessments</h1>
<div id="population-size-reduction-iucn-criterion-a" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Population size
reduction (IUCN criterion A)</h2>
<p>The IUCN criterion A mainly evaluates paste and projects population
size reductions. In <code>ConR</code>, it is assessed using the function
<code>criterion_A()</code>, which requires population sizes through time
(<code>mean.pop</code>) and generation lengths
(<code>gen.length</code>). For this tutorial, we will assess only the
subcriterion A2, which makes more sense in the specific context of the
Atlantic Forest.</p>
<p><code>ConR</code> also allows to include information on exploitation
levels for commercial species (e.g. timber), related to the base d of
criterion A. These levels are provided using the argument
<code>exploitation</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>critA <span class="ot">&lt;-</span> <span class="fu">criterion_A</span>(<span class="at">x =</span> mean.pop, </span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>                     <span class="at">assess.year =</span> assess.year,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>                     <span class="at">project.years =</span> <span class="cn">NULL</span>, </span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>                     <span class="at">subcriteria =</span> <span class="fu">c</span>(<span class="st">&quot;A2&quot;</span>),</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>                     <span class="at">generation.time =</span> gen.length,</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>                     <span class="at">exploitation =</span> harvest, <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; Warning: The years of the population sizes were not given and were taken from</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; the input population data</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt; Warning in criterion_A(x = mean.pop, assess.year = assess.year, project.years =</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co">#&gt; NULL, : Maximum projection of population sizes is more than 100 years into the</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co">#&gt; future: assuming 100 years after the year of assessment</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="co">#&gt; Computing the predictions based on population trends...</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co">#&gt; Warning: The following subcriteria were not used in the assessment: A1, A3, A4</span></span></code></pre></div>
</div>
<div id="species-geographic-range-iucn-criterion-b" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Species geographic
range (IUCN criterion B)</h2>
<p>The function <code>criterion_B()</code> help to obtain assessments
based on the criterion B, as well as others parameters documenting the
species geographic range.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>critB <span class="ot">&lt;-</span> <span class="fu">criterion_B</span>(<span class="at">x =</span> occs, </span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>                     <span class="at">AOO =</span> AOO, </span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>                     <span class="at">EOO =</span> EOO.hull<span class="sc">$</span>results, </span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>                     <span class="at">locations =</span> locs<span class="sc">$</span>locations,</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>                     <span class="at">severe.frag =</span> sever.frag,</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>                     <span class="at">subpops =</span> sub, </span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>                     <span class="at">decline =</span> declineB, <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="small-and-declining-populations-iucn-criterion-c" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Small and declining
populations (IUCN criterion C)</h2>
<p>The IUCN criterion C is about small and declining populations. In
<code>ConR</code>, this criterion is assessed using the function
<code>criterion_C()</code>, which requires subpopulation sizes to apply
the sub-criterion C2.</p>
<p>We do not have estimates of subpopulation sizes available. So, we
take a simple approach which is assuming that all subpopulations have
the same size. And we store this simplification in the object
<code>subpop.sizes</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>id.assess <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">names</span>(mean.pop) <span class="sc">%in%</span> assess.year)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="fu">data.frame</span>(<span class="at">tax =</span> spp, <span class="st">&#39;2018&#39;</span> <span class="ot">=</span> mean.pop[,id.assess]), sub)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>subpop.sizes <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="fu">dim</span>(sub)[<span class="dv">1</span>])</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">names</span>(subpop.sizes) <span class="ot">&lt;-</span> sub<span class="sc">$</span>tax</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(subpop.sizes)) {</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  subpop.sizes[[i]] <span class="ot">&lt;-</span> <span class="fu">rep</span>(df<span class="sc">$</span>X2018[i]<span class="sc">/</span>df<span class="sc">$</span>subpop[i], df<span class="sc">$</span>subpop[i])</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, we apply criterion C itself using <code>criterion_C()</code>,
which requires information on population sizes through time
(<code>mean.pop</code>), generation lengths (<code>gen.length</code>)
and proportion of mature individuals (<code>p.mature</code>), besides
the subpopulation sizes obtained above (<code>subpop.sizes</code>).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>critC <span class="ot">&lt;-</span> <span class="fu">criterion_C</span>(<span class="at">x =</span> mean.pop,</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>                     <span class="at">assess.year =</span> assess.year,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>                     <span class="at">project =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>                     <span class="at">recent.year =</span> recent.year,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>                     <span class="at">subcriteria =</span> <span class="fu">c</span>(<span class="st">&quot;C1&quot;</span>,<span class="st">&quot;C2&quot;</span>),</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>                     <span class="at">generation.time =</span> gen.length,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>                     <span class="at">prop.mature =</span> p.mature,</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>                     <span class="at">subpop.size =</span> subpop.sizes,</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>                     <span class="at">correction =</span> early.sucession, <span class="at">show_progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co">#&gt; Warning: The years of the population sizes were not given and were taken from</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt; the input population data</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="co">#&gt; Warning in criterion_C(x = mean.pop, assess.year = assess.year, project =</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co">#&gt; FALSE, : Maximum year to project population sizes is more than 100 years into</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co">#&gt; the future: assuming 100 years after the year of assessment</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="co">#&gt; Computing the estimated continuing decline (subcriteria C1)...</span></span></code></pre></div>
<p>If C1 is listed within the argument <code>subcriteria</code>, the
function returns the estimated continuing decline:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>est.decline <span class="ot">&lt;-</span> critC<span class="sc">$</span>cont.decline</span></code></pre></div>
</div>
<div id="very-small-population-sizes-iucn-criterion-d" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Very small population
sizes (IUCN criterion D)</h2>
<p>The IUCN criterion D is assessed using the function
<code>criterion_D()</code>. We have no spatially explicit information
for future human activities or stochastic events for the Atlantic
Forest. Therefore, here we assess the subcriterion D and not D2.
However, function <code>criterion_D()</code> can be used to assess D2
only if the AOO and the number of locations are provided.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># accounting for exploitation of commercial species</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>p.mature.explo <span class="ot">&lt;-</span> p.mature <span class="sc">-</span> harvest<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># population sizes at the year of assessment</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>pop.sizes.assess <span class="ot">&lt;-</span> mean.pop[[<span class="dv">18</span>]]</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co"># assessing criterion D</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>critD <span class="ot">&lt;-</span> <span class="fu">criterion_D</span>(<span class="at">pop.size =</span> pop.sizes.assess, </span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>                     <span class="at">name_sp =</span> mean.pop[[<span class="dv">1</span>]], </span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>                     <span class="at">AOO =</span> AOO<span class="sc">$</span>aoo,</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>                     <span class="at">n.Locs =</span> locs<span class="sc">$</span>locations<span class="sc">$</span>locations,</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>                     <span class="at">prop.mature =</span> p.mature.explo, </span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>                     <span class="at">subcriteria =</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;D2&quot;</span>),</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>                     <span class="at">AOO.threshold =</span> <span class="dv">20</span>, </span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>                     <span class="at">Loc.threshold =</span> <span class="dv">5</span>)</span></code></pre></div>
</div>
<div id="combining-the-results-from-all-criteria" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Combining the results
from all criteria</h2>
<p>Because we are assessing multiple criteria for the same set of
species, we need to combine the results from all criteria. We try to
avoid duplicated columns in the final object <code>all.crit</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>all.crit <span class="ot">&lt;-</span> <span class="fu">merge</span>(critA, critB, <span class="at">by =</span> <span class="st">&quot;tax&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>rm.dup.columns <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">names</span>(critC) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;assessment.year&quot;</span>, <span class="st">&quot;assessment.period&quot;</span>))</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>all.crit <span class="ot">&lt;-</span> <span class="fu">merge</span>(all.crit, critC[, <span class="sc">-</span>rm.dup.columns], <span class="at">by =</span> <span class="st">&quot;tax&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>, </span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>                  <span class="at">suffixes =</span> <span class="fu">c</span>(<span class="st">&quot;.A&quot;</span>,<span class="st">&quot;.C&quot;</span>))</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>rm.dup.columns <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">names</span>(critD) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;AOO&quot;</span>))</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>all.crit <span class="ot">&lt;-</span> <span class="fu">merge</span>(all.crit, critD[, <span class="sc">-</span>rm.dup.columns], <span class="at">by =</span> <span class="st">&quot;tax&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>all.crit <span class="ot">&lt;-</span> all.crit[<span class="fu">order</span>(all.crit<span class="sc">$</span>tax),]</span></code></pre></div>
</div>
<div id="near-threatened" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Near threatened</h2>
<p>Next, we try to tell apart the Least Concern (LC) from
Near-Threatened (NT) species using the function
<code>near.threatened()</code>:</p>
<!-- change "category_B" by "B1" and "B2" after fixing the output of criterion_B() -->
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>subcriteria <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A2&quot;</span>, <span class="st">&quot;category_B&quot;</span>, <span class="st">&quot;C1&quot;</span>, <span class="st">&quot;C2&quot;</span>, <span class="st">&quot;D&quot;</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(subcriteria)) {</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  all.crit[,subcriteria[i]] <span class="ot">&lt;-</span> </span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>    <span class="fu">near.threatened</span>(<span class="at">cats =</span> all.crit[,subcriteria[i]],</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>                    <span class="at">EOO =</span> all.crit<span class="sc">$</span>EOO,</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>                    <span class="at">AOO =</span> all.crit<span class="sc">$</span>AOO,</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>                    <span class="at">decline =</span> all.crit<span class="sc">$</span>any.decline,</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>                    <span class="at">pop.reduction =</span> all.crit<span class="sc">$</span>reduction_A12,</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>                    <span class="at">pop.size =</span> all.crit<span class="sc">$</span>pop.size,</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>                    <span class="at">pop.size.low =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>                    <span class="at">locations =</span> all.crit<span class="sc">$</span>locations,</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>                    <span class="at">sever.frag =</span> all.crit<span class="sc">$</span>severe_frag,</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>                    <span class="at">ext.fluct =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>                    <span class="at">subpop =</span> all.crit<span class="sc">$</span>subpop, </span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>                    <span class="at">subcriteria =</span> subcriteria[i])</span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="consensus-assessment" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Consensus
assessment</h2>
<p>Finally, we obtained the consensus categories for all four IUCN
criteria using the function <code>cat_mult_criteria()</code>. Although
the criteria resulting in the most restrictive category for each species
prevails, the function returns the evaluation result using other
criteria.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>consensus <span class="ot">&lt;-</span> <span class="fu">cat_mult_criteria</span>(all.crit[, <span class="fu">c</span>(<span class="st">&quot;tax&quot;</span>, subcriteria)])</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>all.crit <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(all.crit, </span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>                             consensus[, <span class="fu">c</span>(<span class="st">&quot;category&quot;</span>,<span class="st">&quot;main.criteria&quot;</span>,<span class="st">&quot;aux.criteria&quot;</span>)])</span></code></pre></div>
<p>The object <code>all.crit</code> now contains all relevant population
metrics and the results of the IUCN conservation assessments using the
Red List criteria A-D.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
